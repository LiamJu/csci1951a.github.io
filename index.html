<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>CSCI1951A Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="CSCI1951A Blog">
<meta property="og:url" content="https://liamju.github.io/csci1951a.github.io/index.html">
<meta property="og:site_name" content="CSCI1951A Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CSCI1951A Blog">
  
    <link rel="alternate" href="/csci1951a.github.io/atom.xml" title="CSCI1951A Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/csci1951a.github.io/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/csci1951a.github.io/" id="logo">CSCI1951A Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/csci1951a.github.io/" id="subtitle">Group Name: The Avengers</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/csci1951a.github.io/">Home</a>
        
          <a class="main-nav-link" href="/csci1951a.github.io/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/csci1951a.github.io/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://liamju.github.io/csci1951a.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-BlogPost2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/csci1951a.github.io/2019/04/18/BlogPost2/" class="article-date">
  <time datetime="2019-04-18T15:05:06.000Z" itemprop="datePublished">2019-04-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/csci1951a.github.io/2019/04/18/BlogPost2/">Blog Post 2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://liamju.github.io/csci1951a.github.io/2019/04/18/BlogPost2/" data-id="cjuo7j2ei0001xslj46m96x6w" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-BlogPost1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/csci1951a.github.io/2019/03/15/BlogPost1/" class="article-date">
  <time datetime="2019-03-15T20:26:45.000Z" itemprop="datePublished">2019-03-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/csci1951a.github.io/2019/03/15/BlogPost1/">Blog Post 1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="About-the-Project"><a href="#About-the-Project" class="headerlink" title="About the Project"></a>About the Project</h2><p>Is it impossible to predict the box office of a movie? Maybe not :) With “big data” resources and “machine learning” methods, we could make some accurate forecasts. That is what we are trying to achieve in this project. Starting from forecasting one popular movie Avengers 4: EndGame, which will be released in April 2019, we will see how different features of the movie have influence on the box office. The features to be considered are mainly in three categories: The financial influence from movie crews, The social comments and economic background of movie industry. Learning from this prediction model for one specific movie, we could finally come up with a tool to generalize this forecasting progress and make it one useful tool to select the upcoming movie with most box office potential.</p>
<h3 id="Goals"><a href="#Goals" class="headerlink" title="Goals"></a>Goals</h3><ul>
<li>Predict the first day box office of movie Avengers 4: EndGame.</li>
<li>Predict the whole box office of movie Avengers 4: EndGame.</li>
<li>Generalize the movie box office forecast model.</li>
</ul>
<h2 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h2><h3 id="Movie-features-crew-plot-keywords-similar-movies-release-information"><a href="#Movie-features-crew-plot-keywords-similar-movies-release-information" class="headerlink" title="Movie features: crew, plot keywords, similar movies, release information."></a>Movie features: crew, plot keywords, similar movies, release information.</h3><p>We use the dataset downloaded from Kaggle. After data-cleaning, here is part of the information.<br><img src="/csci1951a.github.io/2019/03/15/BlogPost1/Blog1Kagglecsv.png" alt></p>
<h3 id="Social-influence-reviews-hashtags-on-social-media"><a href="#Social-influence-reviews-hashtags-on-social-media" class="headerlink" title="Social influence: reviews, hashtags on social  media"></a>Social influence: reviews, hashtags on social  media</h3><p>We use data from Twitter to present the social influence of the movie. For simplicity, we first only take the number of tweets into our consideration. In later version, we will also use some NLP method to analyze the content of tweets.</p>
<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><p>We divide the box office of a movie into two parts: base and variance. </p>
<pre><code>box office = base + variance 
</code></pre><p>Then we use the dataset from Kaggle to predict the base value and use the data from Twitter to predict the variance part.<br>There are many useful features that help us predict the base value of the box office of a film. However, it misses one necessary term– “box office records the first day of release”. The box office Mojo is an website that offers this information: <a href="https://www.boxofficemojo.com/alltime/days/?page=open&amp;p=.htm" target="_blank" rel="noopener">https://www.boxofficemojo.com/alltime/days/?page=open&amp;p=.htm</a>. Therefore, an additional step of web scraping and data cleaning is needed for the data of movie features</p>
<p><img src="/csci1951a.github.io/2019/03/15/BlogPost1/Blog1boxofficemojo.png" alt><br>For the base part, we do a multiple regression analysis. Y is the base value of the box office, X are some movie features. For the variance, we will adopt machine learning method to analyze and also use regression to predict the value.</p>
<h2 id="Timeline"><a href="#Timeline" class="headerlink" title="Timeline"></a>Timeline</h2><p>Feb/2019: Topic discussion &amp; Data preparation<br>Mar/1 - Mar/15: Methodology research &amp; Data - preprocessing I<br>Mar/15 - Mar/31: Data - preprocessing II &amp; Train model for predicting base value (first day box office)<br>Mar/30 - Apr/15: Train model for predicting base value (whole box office) &amp; variance value(first day box office)<br>Apr/15 - Apr/30: Train model for predicting variance value(real time)</p>
<h2 id="Current-Status"><a href="#Current-Status" class="headerlink" title="Current Status"></a>Current Status</h2><h3 id="Progress"><a href="#Progress" class="headerlink" title="Progress"></a>Progress</h3><p>We crawled all tweets related to a movie one month before the release date of this movie and compute the number of tweets on each day. Then we get 30 features x0, … , x29. So if we want to predict the box office of <em>Avenger 4</em>, not only will we crawled all tweets related to <em>Avenger 4</em>, but also we need to select a set of movies that is similar to <em>Avenger 4</em>, which is our training set. We need to crawl all tweets for these movies one by one (MapReduce).</p>
<p>To use Twitter API, we first created a Twitter developer account and obtain credentials.Then we created an app on <a href="https://developer.twitter.com/en/apps" target="_blank" rel="noopener">https://developer.twitter.com/en/apps</a>. Note that Twitter is very concerned about users’ privacy. You have to describe in detail the functionality of your app and how you will use the data get from Twitter. After creating an app, we can get Consumer API keys and Access tokens and use Twitter APIs in our program.</p>
<p>In our project, we choose to use Tweepy, a Python wrapper around the Twitter API. There are many other libraries in various programming languages that let you use Twitter API. because it is simple to use yet fully supports the Twitter API.</p>
<p>The first step is to setup tweepy to authenticate with Twitter credentials:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">auth = OAuthHandler(consumer_key, consumer_secret)</span><br><span class="line">auth.set_access_token(access_token, access_token_secret)</span><br><span class="line">api = tweepy.API(auth)</span><br></pre></td></tr></table></figure></p>
<p>Then we can use the search API to get tweets that related to the tag “TheAvengers”, we can use the following code:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> tweet <span class="keyword">in</span> tweepy.Cursor(api.search, q=<span class="string">"#TheAvengers"</span>, count = <span class="number">100</span>,</span><br><span class="line">                        lang=<span class="string">"en"</span>,</span><br><span class="line">                        since_id=sinceId,</span><br><span class="line">                        max_id=maxId).items():</span><br><span class="line">print(tweet.created_at, tweet.text, tweet.id)</span><br><span class="line">csvWriter.writerow([tweet.created_at, tweet.id, tweet.text.encode(<span class="string">'utf-8'</span>)])</span><br></pre></td></tr></table></figure></p>
<p>The result looks like:<br><img src="/csci1951a.github.io/2019/03/15/BlogPost1/Blog1Twittercsv.png" alt></p>
<p>Note that in the latest Twitter search API, Twitter replace the parameters <em>since</em> and <em>until</em> with <em>since_id</em> and <em>max_id</em>, tweetId is an integer that increase monotonically in Twitter. Another problem is that the search index has a 7-day limit. In other word, if you want to get all tweets in the past 30 days, you have to call this API for 5 times.</p>
<h2 id="Next-Steps"><a href="#Next-Steps" class="headerlink" title="Next Steps"></a>Next Steps</h2><h3 id="Goals-1"><a href="#Goals-1" class="headerlink" title="Goals"></a>Goals</h3><p>Data - preprocessing II: Use mapreduce to process the data. We set the data as key and count the number of tweets on each day.<br>                         Collect  data for the movie first day box office.<br>Train model for predicting base value (first day box office): linear regression model training.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://liamju.github.io/csci1951a.github.io/2019/03/15/BlogPost1/" data-id="cjuo7j2ef0000xsljztmw6kg7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/csci1951a.github.io/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/csci1951a.github.io/archives/2019/03/">March 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/csci1951a.github.io/2019/04/18/BlogPost2/">Blog Post 2</a>
          </li>
        
          <li>
            <a href="/csci1951a.github.io/2019/03/15/BlogPost1/">Blog Post 1</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Shunjia Zhu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/csci1951a.github.io/" class="mobile-nav-link">Home</a>
  
    <a href="/csci1951a.github.io/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/csci1951a.github.io/fancybox/jquery.fancybox.css">
  <script src="/csci1951a.github.io/fancybox/jquery.fancybox.pack.js"></script>


<script src="/csci1951a.github.io/js/script.js"></script>



  </div>
</body>
</html>